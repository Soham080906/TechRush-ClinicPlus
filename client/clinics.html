<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Clinics - ClinicPlus</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-heartbeat"></i>
                <span>ClinicPlus</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="doctors.html" class="nav-link">Doctors</a></li>
                <li><a href="appointments.html" class="nav-link">Book Appointment</a></li>
                <li><a href="login.html" class="nav-link btn-login" id="loginLink">Login</a></li>
                <li><a href="register.html" class="nav-link btn-register" id="registerLink">Register</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Clinics Section -->
    <div class="clinics-page">
        <div class="container">
            <div class="clinics-header">
                <h1>Our Medical Clinics</h1>
                <p>Discover our network of modern healthcare facilities</p>
            </div>

            <!-- Search Section -->
            <div class="search-section">
                <div class="search-controls">
                    <div class="search-group">
                        <label for="searchClinic">Search Clinics</label>
                        <input type="text" id="searchClinic" placeholder="Search by name or location...">
                    </div>
                    <div class="search-group">
                        <label for="serviceFilter">Services</label>
                        <select id="serviceFilter">
                            <option value="">All Services</option>
                            <option value="cardiology">Cardiology</option>
                            <option value="pediatrics">Pediatrics</option>
                            <option value="dermatology">Dermatology</option>
                            <option value="orthopedics">Orthopedics</option>
                            <option value="general">General Medicine</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Clinics Grid -->
            <div class="clinics-grid" id="clinicsGrid">
                <!-- Clinics will be loaded here -->
            </div>

            <!-- Loading State -->
            <div id="loadingState" class="loading-state">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Loading clinics...</p>
            </div>

            <!-- No Results State -->
            <div id="noResultsState" class="no-results-state" style="display: none;">
                <i class="fas fa-search"></i>
                <h3>No clinics found</h3>
                <p>Try adjusting your search criteria</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        let allClinics = [];
        let allDoctors = [];

        // Load clinics data
        async function loadClinics() {
            try {
                const [clinicsResponse, doctorsResponse] = await Promise.all([
                    fetch('http://localhost:5000/api/clinics'),
                    fetch('http://localhost:5000/api/doctors')
                ]);

                allClinics = await clinicsResponse.json();
                allDoctors = await doctorsResponse.json();

                // Enhance clinics with doctor information
                allClinics = allClinics.map(clinic => {
                    const clinicDoctors = allDoctors.filter(doctor => 
                        doctor.clinic && doctor.clinic._id === clinic._id
                    );
                    return {
                        ...clinic,
                        doctorCount: clinicDoctors.length,
                        specializations: [...new Set(clinicDoctors.map(doc => doc.specialization))]
                    };
                });

                displayClinics(allClinics);
                hideLoading();
            } catch (error) {
                console.error('Error loading clinics:', error);
                // Load mock data for demonstration
                loadMockData();
            }
        }

        function loadMockData() {
            allClinics = [
                {
                    _id: '1',
                    name: 'Bharati Hospital',
                    location: 'Satara Rd, Bharati Vidyapeeth Campus, Dhankawadi',
                   
                    
                    services: ['Cardiology', 'Pediatrics', 'General Medicine', 'Emergency Care'],
                    doctorCount:2,
                    
                    
                },
                {
                    _id: '2',
                    name: 'Sahyadri Super Speciality Hospital',
                    location:'Karve Road Deccan, Pune',
                   
                 
                    services: ['Dermatology', 'Orthopedics', 'Neurology', 'Physical Therapy'],
                    doctorCount: 2,
                    
                
                },
                {
                    _id: '3',
                    name: 'Medipoint Hospital',
                    location: 'Nagar Road, Chandan Nagar-vadgaon Sheri',
                   
                    services: ['General Medicine', 'Preventive Care', 'Vaccinations', 'Health Screenings'],
                    doctorCount: 1,
                    
                },
                {
                    _id: '4',
                    name: 'Lifeline Hospital',
                    location: 'Sector No 1, Indrayani Nagar Near Hotel Haveli, Pune Nashik Highway',
                   
                    services: ['Cardiology', 'Dermatology', 'Endocrinology', 'Gastroenterology'],
                    doctorCount: 1,
                    
                },
                {
                    _id: '5',
                    name: "Jupiter Multispeciality Hospital",
                    location: "Shivajinagar, Pune",
                    services: ['Cardiology', 'Dermatology', 'Endocrinology', 'Gastroenterology'],
                    doctorCount: 2,

                },
                {
                    _id: '6',
                    name:"Magnum Hospital",
                    location: "Deccan Gymkhana, Pune",
                    services: ['Cardiology', 'Dermatology', 'Endocrinology'],
                    doctorCount: 1,

                },
                {
                    _id: '7',
                    name: "Sasoon Hospital",
                    location: 'Kothrud, Pune',
                    services: ['General Medicine', 'Preventive Care', 'Vaccinations', 'Health Screenings'],
                    doctorCount: 3,
                },
                {
                    _id: '8',
                    name: "Ruby Hall Clinic",
                    location: 'Kasba Peth, Pune',
                    services: ['General Medicine', 'Vaccinations', 'Health Screenings'],
                    doctorCount: 2,
                },
                {
                    _id: '9',
                    name: "Kamla Nehru Hospital",
                    location: 'Mangalwar peth, Pune',
                    services: ['Vaccinations', 'Health Screenings'],
                    doctorCount: 1,
                },
                {
                    _id: '10',
                    name: "Deenanath Mangeshkar Hospital",
                    location: 'Mhatre Bridge, Pune',
                    services: ['Cardiology', 'Dermatology','General Medicine', 'Preventive Care'],
                    doctorCount: 2,

                },
                {
                    _id: '11',
                    name: "Manipal Hospital",
                    location: 'Baner, Pune',
                    services: ['Dermatology','General Medicine', 'Preventive Care'],
                    doctorCount: 3,
                }
            ];

            displayClinics(allClinics);
            hideLoading();
        }

        function displayClinics(clinics) {
            const clinicsGrid = document.getElementById('clinicsGrid');
            const noResultsState = document.getElementById('noResultsState');
            
            if (clinics.length === 0) {
                clinicsGrid.innerHTML = '';
                noResultsState.style.display = 'block';
                return;
            }

            noResultsState.style.display = 'none';
            clinicsGrid.innerHTML = '';

            clinics.forEach(clinic => {
                const clinicCard = document.createElement('div');
                clinicCard.className = 'clinic-card';
                clinicCard.innerHTML = `
                    <div class="clinic-header">
                        <div class="clinic-icon">
                            <i class="fas fa-hospital"></i>
                        </div>
                        <div class="clinic-title">
                            <h3>${clinic.name}</h3>
                            <p class="location"><i class="fas fa-map-marker-alt"></i> ${clinic.location}</p>
                        </div>
                    </div>
                    
                        <div class="info-item">
                            <i class="fas fa-user-md"></i>
                            <span>${clinic.doctorCount} doctors available</span>
                        </div>
                    </div>
                    <div class="clinic-services">
                        <h4>Services</h4>
                        <div class="services-list">
                            ${clinic.services.map(service => `<span class="service-tag">${service}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div class="clinic-actions">
                        <a href="appointments.html" class="btn btn-primary btn-sm">
                            <i class="fas fa-calendar-plus"></i> Book Appointment
                        </a>
                        <button class="btn btn-secondary btn-sm" onclick="viewClinicDetails('${clinic._id}')">
                            <i class="fas fa-info-circle"></i> View Details
                        </button>
                    </div>
                `;
                clinicsGrid.appendChild(clinicCard);
            });
        }

        function hideLoading() {
            document.getElementById('loadingState').style.display = 'none';
        }

        // Filter functionality
        function filterClinics() {
            const searchTerm = document.getElementById('searchClinic').value.toLowerCase();
            const serviceFilter = document.getElementById('serviceFilter').value;

            let filteredClinics = allClinics.filter(clinic => {
                const matchesSearch = !searchTerm || 
                    clinic.name.toLowerCase().includes(searchTerm) ||
                    clinic.location.toLowerCase().includes(searchTerm);
                
                const matchesService = !serviceFilter || 
                    clinic.services.some(service => 
                        service.toLowerCase().includes(serviceFilter)
                    );

                return matchesSearch && matchesService;
            });

            displayClinics(filteredClinics);
        }

        // View clinic details
        function viewClinicDetails(clinicId) {
            const clinic = allClinics.find(c => c._id === clinicId);
            if (clinic) {
                alert(`Clinic Details:\n\nName: ${clinic.name}\nLocation: ${clinic.location}\nPhone: ${clinic.phone}\nEmail: ${clinic.email}\nHours: ${clinic.hours}\n\nServices: ${clinic.services.join(', ')}`);
            }
        }

        // Add event listeners for filters
        document.getElementById('searchClinic').addEventListener('input', filterClinics);
        document.getElementById('serviceFilter').addEventListener('change', filterClinics);

        // Hide login/register links if logged in
        window.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            if (token) {
                const loginLink = document.getElementById('loginLink');
                const registerLink = document.getElementById('registerLink');
                if (loginLink) loginLink.style.display = 'none';
                if (registerLink) registerLink.style.display = 'none';
            }
        });

        // Initialize page
        loadClinics();
    </script>

    <style>
        .clinics-page {
            padding-top: 100px;
            min-height: 100vh;
            background: #f8fafc;
        }

        .clinics-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .clinics-header h1 {
            font-size: 2.5rem;
            color: #1e293b;
            margin-bottom: 1rem;
        }

        .clinics-header p {
            color: #64748b;
            font-size: 1.1rem;
        }

        .search-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }

        .search-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .search-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #374151;
            font-weight: 500;
        }

        .search-group input,
        .search-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .search-group input:focus,
        .search-group select:focus {
            outline: none;
            border-color: #2563eb;
        }

        .clinics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .clinic-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .clinic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .clinic-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .clinic-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-right: 1rem;
        }

        .clinic-title h3 {
            margin: 0 0 0.5rem 0;
            color: #1e293b;
            font-weight: 600;
        }

        .clinic-title .location {
            margin: 0;
            color: #64748b;
            font-size: 0.9rem;
        }

        .clinic-info {
            margin-bottom: 1.5rem;
        }

        .info-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            color: #64748b;
        }

        .info-item i {
            width: 20px;
            margin-right: 0.5rem;
            color: #2563eb;
        }

        .clinic-services,
        .clinic-specializations {
            margin-bottom: 1.5rem;
        }

        .clinic-services h4,
        .clinic-specializations h4 {
            margin: 0 0 0.75rem 0;
            color: #1e293b;
            font-weight: 600;
            font-size: 1rem;
        }

        .services-list,
        .specializations-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .service-tag,
        .spec-tag {
            background: #eff6ff;
            color: #2563eb;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .spec-tag {
            background: #f0fdf4;
            color: #059669;
        }

        .clinic-actions {
            display: flex;
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .loading-state,
        .no-results-state {
            text-align: center;
            padding: 3rem;
            color: #64748b;
        }

        .loading-state i,
        .no-results-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #2563eb;
        }

        .no-results-state h3 {
            margin: 1rem 0 0.5rem 0;
            color: #1e293b;
        }

        @media (max-width: 768px) {
            .search-controls {
                grid-template-columns: 1fr;
            }

            .clinics-grid {
                grid-template-columns: 1fr;
            }

            .clinic-actions {
                flex-direction: column;
            }
        }
    </style>
</body>
</html>
